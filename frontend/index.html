<!-- frontend/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AuthMini</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body x-data="app()" class="bg-gray-100 min-h-screen flex items-center justify-center">
  <!-- Login/Register Form -->
  <div x-show="!user" class="form-container">
    <div x-data="authComponent()">
      <h2 class="text-2xl font-bold mb-4 text-white">AuthMini Login / Register</h2>
      <input x-model="email" type="email" placeholder="Email" class="text-gray-800 w-full p-2 mb-4 rounded">
      <input x-model="password" type="password" placeholder="Password" class="text-gray-800 w-full p-2 mb-4 rounded">
      <button @click="submit('register')" class="btn-primary">Register</button>
      <button @click="submit('login')" class="btn-primary ml-2">Login</button>
      <p x-text="error" class="text-red-500 mt-2"></p>
    </div>
  </div>

  <!-- User Dashboard -->
  <div x-show="user !== null && user.role === 'user'" class="form-container">
    <h2 class="text-2xl font-bold mb-4 text-white">Welcome, <span x-text="user?.email || 'User'"></span></h2>
    <button @click="logout()" class="btn-primary">Logout</button>
  </div>

  <!-- Admin Dashboard -->
  <div x-show="user !== null && user.role === 'admin'" class="form-container">
    <h2 class="text-2xl font-bold mb-4 text-white">Admin Dashboard</h2>
    <h3 class="text-lg font-semibold mb-2 text-white">Users</h3>
    <ul class="mb-4">
      <template x-for="u in users" :key="u.id">
        <li class="text-white" x-text="`${u.email} (${u.role}) - Joined: ${new Date(u.created_at).toLocaleDateString()}`"></li>
      </template>
    </ul>
    <button @click="logout()" class="btn-primary">Logout</button>
  </div>

  <!-- Scripts -->
  <script src="js/app.js" defer></script>
  <script src="js/auth.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/axios@1.6.8/dist/axios.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.14.1/dist/cdn.min.js" defer></script>
</body>
</html>